(this["webpackJsonpexpensify-app"]=this["webpackJsonpexpensify-app"]||[]).push([[0],{160:function(e,t,n){e.exports=n(301)},176:function(e,t,n){},250:function(e,t){},285:function(e,t,n){},286:function(e,t,n){},287:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){},297:function(e,t,n){},298:function(e,t,n){e.exports=n.p+"static/media/loader.66752d97.gif"},300:function(e,t,n){},301:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n(24),s=n.n(c),i=n(25),u=n(26),l=n(28),p=n(27),d=n(63),m=n(9),h=n(157),f=n.n(h),E=n(20),v=n(64),b=n.n(v),g=n(3),O=n.n(g),x=function(e,t){var n=t.text,a=t.sortBy,r=t.startDate,o=t.endDate;return e.filter((function(e){var t=O()(e.createdAt),a=!r||r.isSameOrBefore(t,"day"),c=!o||o.isSameOrAfter(t,"day"),s=e.description.toLowerCase().includes(n.toLowerCase());return a&&c&&s})).sort((function(e,t){return"date"===a?e.createdAt<t.createdAt?1:-1:"amount"===a?e.amount<t.amount?1:-1:void 0}))},N=(n(176),Object(o.b)((function(e){var t,n=x(e.expenses,e.filters);return{expenseCount:n.length,expensesTotal:(t=n,t.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))}}))((function(e){var t=e.expenseCount,n=e.expensesTotal,a=1===t?"expense":"expenses",o=b()(n/100).format("$0,0.00");return r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Viewing ",r.a.createElement("span",null,t)," ",a," totalling"," ",r.a.createElement("span",null,o)),r.a.createElement(E.a,{className:"page-header__actions",to:"/create"},"Add Expense")))}))),y=n(65),_=(n(138),n(285),function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={calendarFocused:null},e.onTextChange=function(t){e.props.setTextFilter(t.target.value)},e.onDatesChange=function(t){var n=t.startDate,a=t.endDate;e.props.setStartDate(n),e.props.setEndDate(a)},e.onSortChange=function(t){"date"===t.target.value?e.props.sortByDate():"amount"===t.target.value&&e.props.sortByAmount()},e.onFocusChange=function(t){return e.setState({calendarFocused:t})},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group__item"},r.a.createElement("input",{placeholder:"Search Expenses",className:"text-input",type:"text",value:this.props.filters.text,onChange:this.onTextChange})),r.a.createElement("div",{className:"input-group__item"},r.a.createElement("select",{className:"select",value:this.props.filters.sortBy,onChange:this.onSortChange},r.a.createElement("option",{value:"date"},"Date"),r.a.createElement("option",{value:"amount"},"Amount"))),r.a.createElement("div",{className:"input-group__item"},r.a.createElement(y.DateRangePicker,{className:"dateRangePicker",startDate:this.props.filters.startDate,startDateId:"startdateid",endDate:this.props.filters.endDate,endDateId:"enddateid",onDatesChange:this.onDatesChange,focusedInput:this.state.calendarFocused,onFocusChange:this.onFocusChange,numberOfMonths:1,isOutsideRange:function(){return!1},showClearDates:!0}))))}}]),n}(r.a.Component)),S=Object(o.b)((function(e){return{filters:e.filters,expenses:e.expenses}}),(function(e){return{setTextFilter:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:"SET_TEXT_FILTER",text:e}}(t))},sortByDate:function(){return e({type:"SORT_BY_DATE"})},sortByAmount:function(){return e({type:"SORT_BY_AMOUNT"})},setStartDate:function(t){return e(function(e){return{type:"SET_START_DATE",startDate:e}}(t))},setEndDate:function(t){return e(function(e){return{type:"SET_END_DATE",endDate:e}}(t))}}}))(_),j=(n(286),function(e){var t=e.description,n=e.amount,a=e.createdAt,o=e.id;e.dispatch;return r.a.createElement(E.a,{className:"list-item",to:"/edit/".concat(o)},r.a.createElement("div",null,r.a.createElement("h3",{className:"list-item__title"},t),r.a.createElement("span",{className:"list-item__subtitle"},O()(a).format("MMMM Do, YYYY"))),r.a.createElement("div",null,r.a.createElement("h3",{className:"list-item__data"},b()(n/100).format("$0,0.00"))))}),D=(n(287),Object(o.b)((function(e){return{expenses:x(e.expenses,e.filters)}}))((function(e){return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"list-header"},r.a.createElement("div",{className:"show-for-mobile"},"Expenses"),r.a.createElement("div",{className:"show-for-desktop"},"Expense"),r.a.createElement("div",{className:"show-for-desktop"},"Amount")),0===e.expenses.length?r.a.createElement("div",{className:"list-message"},r.a.createElement("span",null,"No expenses")):e.expenses.map((function(e){return r.a.createElement(j,Object.assign({key:e.id},e))})))}))),A=function(){return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(S,null),r.a.createElement(D,null))},C=n(12),T=n(55),w=n.n(T);n(288),n(290);w.a.initializeApp({apiKey:"AIzaSyDvppfmHfOUQqOYae6XL7iZmpPp15YwAVc",authDomain:"expensify-app-7bc3b.firebaseapp.com",databaseURL:"https://expensify-app-7bc3b.firebaseio.com",projectId:"expensify-app-7bc3b",storageBucket:"expensify-app-7bc3b.appspot.com",messagingSenderId:"933026124546",appId:"1:933026124546:web:997db739bb4365c627e81b"});var k=w.a.database(),R=new w.a.auth.GoogleAuthProvider,B=function(e){return{type:"ADD_EXPENSE",expense:e}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return{type:"REMOVE_EXPENSE",id:t}},I=(n(292),O()());console.log(I.format("Do/MMM/YYYY"));var L=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onDescriptionChange=function(e){var t=e.target.value;a.setState((function(){return{description:t}}))},a.onNoteChange=function(e){var t=e.target.value;a.setState((function(){return{note:t}}))},a.onAmountChange=function(e){var t=e.target.value;t&&!t.match(/^\d{1,}(\.\d{0,2})?$/)||a.setState((function(){return{amount:t}}))},a.onDateChange=function(e){e&&a.setState((function(){return{createdAt:e}}))},a.onFocusChange=function(e){var t=e.focused;a.setState((function(){return{calendarFocused:t}}))},a.onSubmit=function(e){e.preventDefault(),a.state.description&&a.state.amount?(a.setState((function(){return{error:""}})),a.props.onSubmit({description:a.state.description,amount:100*parseFloat(a.state.amount,10),createdAt:a.state.createdAt.valueOf(),note:a.state.note}),a.setState((function(){return{description:"",amount:"",date:O()(),note:""}}))):a.setState((function(){return{error:"Please enter the necessary details"}}))},a.state={description:e.expense?e.expense.description:"",note:e.expense?e.expense.note:"",amount:e.expense?(e.expense.amount/100).toString():"",createdAt:e.expense?O()(e.expense.createdAt):O()(),calendarFocused:!1,error:""},a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.onSubmit,className:"form"},this.state.error&&r.a.createElement("p",{className:"form-error"},this.state.error),r.a.createElement("input",{className:"text-input",type:"text",value:this.state.description,placeholder:"Description",autoFocus:!0,onChange:this.onDescriptionChange}),r.a.createElement("input",{className:"text-input",type:"text",placeholder:"Amount",value:this.state.amount,onChange:this.onAmountChange}),r.a.createElement(y.SingleDatePicker,{className:"datepicker",date:this.state.createdAt,onDateChange:this.onDateChange,focused:this.state.calendarFocused,onFocusChange:this.onFocusChange,numberOfMonths:1,isOutsideRange:function(){return!1}}),r.a.createElement("textarea",{className:"textarea",value:this.state.note,onChange:this.onNoteChange,placeholder:"Add a note for your expense(optional)"}),r.a.createElement("div",null,r.a.createElement("button",{className:"button",onClick:this.onSubmit},"Save Expense"),r.a.createElement(E.a,{className:"cancel-button",to:"/"},"Cancel")))}}]),n}(r.a.Component),M=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.startAddExpense(t),e.props.history.push("/dashboard")},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header "},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Add Expense"))),r.a.createElement("div",{className:"content-container"},r.a.createElement(L,{onSubmit:this.onSubmit})))}}]),n}(r.a.Component),P=Object(o.b)(null,(function(e){return{startAddExpense:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var a=n().auth.uid,r=e.description,o=void 0===r?"":r,c=e.note,s=void 0===c?"":c,i=e.amount,u=void 0===i?0:i,l=e.createdAt,p={description:o,note:s,amount:u,createdAt:void 0===l?0:l};return k.ref("users/".concat(a,"/expenses")).push(p).then((function(e){t(B(Object(C.a)({id:e.key},p)))}))}}(t))}}}))(M),Y=(n(293),function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.startEditExpenses(e.props.expense.id,t),e.props.history.push("/dashboard")},e.onRemove=function(){e.props.startRemoveExpenses({id:e.props.expense.id}),e.props.history.push("/dashboard")},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"page-header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("h1",{className:"page-header__title"},"Edit Expense"))),r.a.createElement("div",{className:"content-container remove"},r.a.createElement(L,{expense:this.props.expense,onSubmit:this.onSubmit}),r.a.createElement("button",{onClick:this.onRemove,className:"button remove-button"},"Remove Expense")))}}]),n}(r.a.Component)),X=Object(o.b)((function(e,t){return{expense:e.expenses.find((function(e){return e.id===t.match.params.id}))}}),(function(e,t){return{startEditExpenses:function(t,n){return e(function(e,t){return function(n,a){var r=a().auth.uid;return k.ref("users/".concat(r,"/expenses/").concat(e)).update(t).then((function(){n(function(e,t){return{type:"EDIT_EXPENSE",id:e,updates:t}}(e,t))}))}}(t,n))},startRemoveExpenses:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return function(e,n){var a=n().auth.uid;return k.ref("users/".concat(a,"/expenses/").concat(t)).remove().then((function(){e(F({id:t}))}))}}(t))}}}))(Y),G=function(){return r.a.createElement("div",null,"404 Not Found - ",r.a.createElement(E.b,{to:"/"},"Go Home"))},U=(n(294),Object(o.b)(void 0,(function(e){return{startLogin:function(){return e((function(){return w.a.auth().signInWithPopup(R)}))}}}))((function(e){var t=e.startLogin;return r.a.createElement("div",{className:"box-layout"},r.a.createElement("div",{className:"box-layout__box"},r.a.createElement("h1",{className:"box-layout__title"},"Expensify"),r.a.createElement("p",null,"A Better Way To Handle Your Expenses."),r.a.createElement("button",{className:"button",onClick:t},"Login With Google")))}))),V=n(66),W=(n(295),Object(o.b)(void 0,(function(e){return{startLogout:function(){return e((function(){return w.a.auth().signOut()}))}}}))((function(e){var t=e.startLogout;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"header__content"},r.a.createElement(E.a,{className:"header__title",to:"/dashboard"},r.a.createElement("h1",null,"Expensify")),r.a.createElement("button",{className:"header__button",onClick:t},"Logout"))))}))),$=Object(o.b)((function(e){return{isAuthenticated:!!e.auth.uid}}))((function(e){var t=e.isAuthenticated,n=e.component,a=Object(V.a)(e,["isAuthenticated","component"]);return r.a.createElement(m.b,Object.assign({},a,{component:function(e){return t?r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(n,e)):r.a.createElement(m.a,{to:"/"})}}))})),H=Object(o.b)((function(e){return{isAuthenticated:!!e.auth.uid}}))((function(e){var t=e.isAuthenticated,n=e.component,a=Object(V.a)(e,["isAuthenticated","component"]);return r.a.createElement(m.b,Object.assign({},a,{component:function(e){return t?r.a.createElement(m.a,{to:"/dashboard"}):r.a.createElement(n,e)}}))})),z=f()(),J=function(){return r.a.createElement(m.c,{history:z},r.a.createElement("div",null,r.a.createElement(m.d,null,r.a.createElement(H,Object(d.a)({exact:!0,path:"/",component:U},"exact",!0)),r.a.createElement($,{path:"/create",component:P}),r.a.createElement($,{path:"/dashboard",component:A}),r.a.createElement($,{path:"/edit/:id",component:X}),r.a.createElement(m.b,{component:G}))))},q=(n(296),function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(J,null))}}]),n}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(297);var K=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("img",{src:n(298)}))}}]),a}(r.a.Component),Q=(n(299),n(300),n(40)),Z=n(158),ee=n(159),te=[],ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EXPENSE":return[].concat(Object(ee.a)(e),[t.expense]);case"REMOVE_EXPENSE":return e.filter((function(e){return e.id!==t.id}));case"EDIT_EXPENSE":return e.map((function(e){return e.id===t.id?Object(C.a)(Object(C.a)({},e),t.updates):e}));case"SET_EXPENSES":return t.expenses;default:return e}},ae={text:"",sortBy:"date",startDate:O()().startOf("month"),endDate:O()().endOf("month")},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEXT_FILTER":return Object(C.a)(Object(C.a)({},e),{},{text:t.text});case"SORT_BY_AMOUNT":return Object(C.a)(Object(C.a)({},e),{},{sortBy:"amount"});case"SORT_BY_DATE":return Object(C.a)(Object(C.a)({},e),{},{sortBy:"date"});case"SET_START_DATE":return Object(C.a)(Object(C.a)({},e),{},{startDate:t.startDate});case"SET_END_DATE":return Object(C.a)(Object(C.a)({},e),{},{endDate:t.endDate});default:return e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{uid:t.uid};case"LOGOUT":return{};default:return e}},ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Q.d,se=function(){return Object(Q.e)(Object(Q.c)({expenses:ne,filters:re,auth:oe}),ce(Object(Q.a)(Z.a)))}();s.a.render(r.a.createElement(o.a,{store:se},r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null))),document.getElementById("root"));var ie=!1,ue=function(){ie||(s.a.render(r.a.createElement(o.a,{store:se},r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null))),document.getElementById("root")),ie=!0)};w.a.auth().onAuthStateChanged((function(e){e?(se.dispatch({type:"LOGIN",uid:e.uid}),se.dispatch((function(e,t){var n=t().auth.uid;return k.ref("users/".concat(n,"/expenses")).once("value").then((function(t){var n=[];t.forEach((function(e){n.push(Object(C.a)({id:e.key},e.val()))})),e(function(e){return{type:"SET_EXPENSES",expenses:e}}(n))}))})).then((function(){ue(),"/"===z.location.pathname&&z.push("/dashboard")}))):(se.dispatch({type:"LOGOUT"}),ue(),z.push("/"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[160,1,2]]]);
//# sourceMappingURL=main.b084e4f3.chunk.js.map